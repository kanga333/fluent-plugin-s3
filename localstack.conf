<system>
  log_level debug
</system>

<source>
  @type dummy
  dummy {"hello":"world"}
  rate 10
  tag dummy

</source>

<match dummy>
  @type s3

  aws_key_id YOUR_AWS_KEY_ID
  aws_sec_key YOUR_AWS_SECRET_KEY
  s3_bucket flunetd
  s3_region us-east-1
  s3_endpoint http://localstack:4566

  path data/
  s3_object_key_format %{path}%{time_slice}_%{index}.%{file_extension}

  <format>
    @type json
  </format>

  <buffer>
    @type memory
    flush_mode interval
    flush_interval 10s
  </buffer>
  store_as arrow
</match>
